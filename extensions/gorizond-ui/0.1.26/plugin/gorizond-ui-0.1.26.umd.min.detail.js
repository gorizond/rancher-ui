(("undefined"!==typeof self?self:this)["webpackChunkgorizond_ui_0_1_26"]=("undefined"!==typeof self?self:this)["webpackChunkgorizond_ui_0_1_26"]||[]).push([[332],{4976:function(e,t,a){var r=a(49360);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=a(74825).A;n("86893f82",r,!0,{sourceMap:!1,shadowMode:!1})},9537:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var r=a(9274);const n={class:"p-6 space-y-6 gorizond-cluster-detail"},s={class:"header"},l={class:"type-title mb-1"},o={class:"grid gap-6 xl:grid-cols-3 form-grid"},i={class:"xl:col-span-2 space-y-6"},c={class:"panel panel-section"},d={class:"grid md:grid-cols-2 gap-4"},p={class:"kv"},u={class:"kv-value"},m={class:"kv"},g={class:"kv-value"},b={class:"kv"},v={class:"kv-value"},f={class:"kv"},h={class:"kv-value"},x={class:"panel panel-section"},y={class:"section-head"},k={class:"pill soft"},w={class:"space-y-3"},V={class:"muted small"},N={class:"panel panel-section summary"},E={class:"install-block"},S=["disabled"];function C(e,t,a,C,D,B){const z=(0,r.resolveComponent)("PercentageBar"),$=(0,r.resolveComponent)("Card");return(0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createVNode)($,{showActions:!0,showHighlightBorder:!1},{title:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",null,[t[1]||(t[1]=(0,r.createElementVNode)("p",{class:"eyebrow"},"Gorizond Cluster",-1)),(0,r.createElementVNode)("h3",l,(0,r.toDisplayString)(B.cluster.metadata.name),1),t[2]||(t[2]=(0,r.createElementVNode)("p",{class:"muted"},"Overview, billing and install command.",-1))])])])),body:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",o,[(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("section",c,[t[7]||(t[7]=(0,r.createElementVNode)("div",{class:"section-head"},[(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("p",{class:"eyebrow"},"Basics"),(0,r.createElementVNode)("p",{class:"muted"}," Cluster identity, workspace and Kubernetes version. ")]),(0,r.createElementVNode)("span",{class:"pill"},"Overview")],-1)),(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("div",p,[t[3]||(t[3]=(0,r.createElementVNode)("p",{class:"kv-label"},"Namespace",-1)),(0,r.createElementVNode)("p",u,(0,r.toDisplayString)(B.cluster.metadata.namespace),1)]),(0,r.createElementVNode)("div",m,[t[4]||(t[4]=(0,r.createElementVNode)("p",{class:"kv-label"},"Kubernetes Version",-1)),(0,r.createElementVNode)("p",g,(0,r.toDisplayString)(B.cluster.spec.kubernetesVersion),1)]),(0,r.createElementVNode)("div",b,[t[5]||(t[5]=(0,r.createElementVNode)("p",{class:"kv-label"},"Billing (Desired)",-1)),(0,r.createElementVNode)("p",v,(0,r.toDisplayString)(B.billingDesired),1)]),(0,r.createElementVNode)("div",f,[t[6]||(t[6]=(0,r.createElementVNode)("p",{class:"kv-label"},"Billing (Status)",-1)),(0,r.createElementVNode)("p",h,(0,r.toDisplayString)(B.billingStatus),1)])])]),(0,r.createElementVNode)("section",x,[(0,r.createElementVNode)("div",y,[t[8]||(t[8]=(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("p",{class:"eyebrow"},"Provisioning"),(0,r.createElementVNode)("p",{class:"muted"},"Current step and progress.")],-1)),(0,r.createElementVNode)("span",k,(0,r.toDisplayString)(B.progressLabel),1)]),(0,r.createElementVNode)("div",w,[(0,r.createElementVNode)("p",V," Steps: "+(0,r.toDisplayString)(B.currentStepIndex+1)+" / "+(0,r.toDisplayString)(B.steps.length)+" — "+(0,r.toDisplayString)(B.progressLabel)+". ",1),(0,r.createVNode)(z,{modelValue:B.currentStepPercentage,showPercentage:!1,preferredDirection:"MORE"},null,8,["modelValue"])])])]),(0,r.createElementVNode)("aside",N,[t[9]||(t[9]=(0,r.createElementVNode)("div",{class:"section-head"},[(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("p",{class:"eyebrow"},"Install command"),(0,r.createElementVNode)("p",{class:"muted"},"Use when tokens are ready.")])],-1)),(0,r.createElementVNode)("div",E,[(0,r.createElementVNode)("pre",{class:(0,r.normalizeClass)(["install-command",{pending:!B.installUrl}])},(0,r.toDisplayString)(B.installPreview)+"\n              ",3)])])])])),actions:(0,r.withCtx)((()=>[(0,r.createElementVNode)("button",{class:"btn role-primary",disabled:!B.installUrl,onClick:t[0]||(t[0]=(...e)=>B.copyInstall&&B.copyInstall(...e))},(0,r.toDisplayString)(B.installUrl?e.t("gorizond.cluster.installLink"):"Waiting for tokens"),9,S)])),_:1})])}var D=a(84937),B=a(12243),z={components:{Card:D.Z,PercentageBar:B.A},props:{value:{type:Object,required:!0}},data(){return{setting:""}},computed:{cluster(){return this.value},progressLabel(){return this.cluster?.status?.provisioning||"Pending"},installPreview(){if(!this.installUrl)return"Install link will appear when cluster is ready.";const e=this.installUrl.match(/curl -fsSL\s+(\S+)\s*\|/),t=e?.[1];if(!t)return this.installUrl;const a=t.split("/"),r=a.length;r>=3&&(a[r-2]=this.maskToken(a[r-2]),a[r-3]=this.maskToken(a[r-3]));const n=a.join("/");return`curl -fsSL ${n} | sh`},steps(){return["WaitAddAdminMember","WaitHeadScaleDatabase","WaitHeadScaleMigrations","WaitHeadScaleConfig","WaitHeadScaleCreate","WaitHeadScaleCreateUser","WaitHeadScaleToken","WaitKubernetesStorage","WaitKubernetesDeploy","WaitKubernetesToken","Done"]},currentStepIndex(){const e=this.cluster?.status?.provisioning,t=this.steps.indexOf(e);return t>=0?t:0},currentStepPercentage(){const e=this.steps.length,t=this.currentStepIndex;return e>1?t/(e-1)*100:0},billingStatus(){return this.cluster?.status?.billing||"free (free tier use)"},billingDesired(){return this.cluster?.spec?.billing||"free (free tier use)"},installUrl(){const e=this.cluster.status||{},t=this.cluster.metadata?.name,a=this.cluster.spec?.kubernetesVersion;if(e.cluster&&e.namespace&&t&&e.k3sToken&&e.headscaleToken&&a){const r=e.k3sToken.replace(/\n/g,""),n=e.headscaleToken.replace(/\n/g,""),s=a.replace("-","+");return`curl -fsSL ${this.setting}/${e.cluster}/${e.namespace}/${t}/${r}/${n}/${s} | sh`}return null}},async created(){const e=await this.$store.dispatch("management/find",{type:"management.cattle.io.setting",id:"gorizond-install-server-url"});this.setting=e.value;const t=this.$store.getters["auth/v3User"]?.labels;if(t&&"admin-user"===t["authz.management.cattle.io/bootstrapping"]){const e=document.getElementById("gorizond-hide-cluster-link-style");e&&e.remove()}},methods:{maskToken(e){return e?e.length<=8?e:`${e.slice(0,4)}…${e.slice(-4)}`:""},async copyInstall(){if(this.installUrl)try{await navigator.clipboard.writeText(this.installUrl),this.$store.dispatch("growl/success",{title:"Copied",message:"Install link copied to clipboard"},{root:!0})}catch(e){this.$store.dispatch("growl/fromError",{title:"Copy failed",err:e},{root:!0})}}}},$=(a(14756),a(47433));const T=(0,$.A)(z,[["render",C],["__scopeId","data-v-0b5c2280"]]);var _=T},14756:function(e,t,a){var r=a(41729);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=a(74825).A;n("6893c6f0",r,!0,{sourceMap:!1,shadowMode:!1})},41729:function(e,t,a){"use strict";a.r(t);var r=a(36758),n=a.n(r),s=a(40935),l=a.n(s),o=l()(n());o.push([e.id,'.gorizond-cluster-detail .header[data-v-0b5c2280]{align-items:center;display:flex;gap:12px;justify-content:space-between}.eyebrow[data-v-0b5c2280]{font-size:12px;font-weight:600;letter-spacing:.08em;margin-bottom:4px;text-transform:uppercase}.eyebrow[data-v-0b5c2280],.muted[data-v-0b5c2280]{color:var(--text-muted,#6b7280)}.muted.small[data-v-0b5c2280]{font-size:12px;line-height:1.4}.panel[data-v-0b5c2280]{background:var(--body-bg,#fff);border:1px solid var(--border,#e5e7eb);border-radius:8px;box-shadow:0 1px 2px rgba(15,23,42,.06)}.panel[data-v-0b5c2280],.panel-section[data-v-0b5c2280]{padding:20px}.section-head[data-v-0b5c2280]{align-items:flex-start;display:flex;gap:12px;justify-content:space-between;margin-bottom:12px}.pill[data-v-0b5c2280]{background:var(--primary-50,#e8f3ff);border-radius:9999px;color:var(--primary-600,#0f70d7);font-size:12px;font-weight:600;padding:6px 12px;white-space:nowrap}.pill.soft[data-v-0b5c2280]{color:var(--text-muted,#6b7280)}.kv[data-v-0b5c2280],.pill.soft[data-v-0b5c2280]{background:var(--hover-bg,#f6f7fb)}.kv[data-v-0b5c2280]{border:1px solid var(--border,#e5e7eb);border-radius:6px;padding:12px}.kv-label[data-v-0b5c2280]{color:var(--text-muted,#6b7280);font-size:12px;letter-spacing:.04em;margin-bottom:4px;text-transform:uppercase}.kv-value[data-v-0b5c2280]{font-weight:600;word-break:break-word}.summary[data-v-0b5c2280]{background:var(--body-bg,#fff);border:1px solid var(--border,#e5e7eb);position:sticky;top:12px;margin-top:24px}.install-block[data-v-0b5c2280]{display:flex;flex-direction:column;gap:12px}.install-command[data-v-0b5c2280]{background:var(--hover-bg,#f6f7fb);border:1px dashed var(--border,#e5e7eb);border-radius:6px;color:var(--text,#111827);font-family:var(\n    --monospace,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace\n  );font-size:13px;margin:0;overflow-x:auto;padding:12px;white-space:pre-wrap;word-break:break-all}.install-command.pending[data-v-0b5c2280]{color:var(--text-muted,#6b7280)}.form-grid[data-v-0b5c2280]{align-items:flex-start;-moz-column-gap:48px;column-gap:48px;row-gap:32px;grid-template-columns:minmax(0,2fr) minmax(320px,1fr)}section.panel+section.panel[data-v-0b5c2280]{margin-top:24px}@media (max-width:1280px){.form-grid[data-v-0b5c2280]{-moz-column-gap:32px;column-gap:32px;row-gap:28px}}',""]),t["default"]=o},49360:function(e,t,a){"use strict";a.r(t);var r=a(36758),n=a.n(r),s=a(40935),l=a.n(s),o=l()(n());o.push([e.id,".card-container{border-radius:var(--border-radius);display:flex;flex-basis:40%;margin:10px;min-height:100px;padding:10px;box-shadow:0 0 20px var(--shadow)}.card-container.highlight-border{border-left:5px solid var(--primary)}.card-container:not(.top){align-items:top;flex-direction:row;justify-content:start}.card-container .card-wrap{width:100%}.card-container .card-body{color:var(--input-label);display:flex;flex-direction:column;justify-content:center}.card-container .card-actions{align-self:end;display:flex;padding-top:20px}.card-container .card-title{align-items:center;display:flex;width:100%}.card-container .card-title h5{margin:0}.card-container .card-title .flex-right{margin-left:auto}.card-container.card-sticky{overflow:hidden}.card-container.card-sticky .card-wrap{display:flex;flex-direction:column}.card-container.card-sticky .card-wrap .card-body{justify-content:flex-start;overflow:auto}.card-container.card-sticky .card-wrap>*{flex:0}.card-container.card-sticky .card-wrap .card-body{flex:1}",""]),t["default"]=o},84937:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var r=a(9274);const n={class:"card-wrap"},s={class:"card-title","data-testid":"card-title-slot"},l={class:"card-body","data-testid":"card-body-slot"},o={key:0,class:"card-actions","data-testid":"card-actions-slot"};function i(e,t,a,i,c,d){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{id:"focus-trap-card-container-element",class:(0,r.normalizeClass)(["card-container",{"highlight-border":e.showHighlightBorder,"card-sticky":e.sticky}]),"data-testid":"card"},[(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",s,[(0,r.renderSlot)(e.$slots,"title",{},(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e.title),1)]))]),t[1]||(t[1]=(0,r.createElementVNode)("hr",null,null,-1)),(0,r.createElementVNode)("div",l,[(0,r.renderSlot)(e.$slots,"body",{},(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e.content),1)]))]),e.showActions?((0,r.openBlock)(),(0,r.createElementBlock)("div",o,[(0,r.renderSlot)(e.$slots,"actions",{},(()=>[(0,r.createElementVNode)("button",{class:"btn role-primary",onClick:t[0]||(t[0]=(...t)=>e.buttonAction&&e.buttonAction(...t))},(0,r.toDisplayString)(e.buttonText),1)]))])):(0,r.createCommentVNode)("",!0)])],2)}var c=a(82149),d=(0,r.defineComponent)({name:"Card",props:{title:{type:String,default:""},content:{type:String,default:""},buttonAction:{type:Function,default:()=>{}},buttonText:{type:String,default:"go"},showHighlightBorder:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},sticky:{type:Boolean,default:!1},triggerFocusTrap:{type:Boolean,default:!1}},setup(e){e.triggerFocusTrap&&(0,c.kS)("#focus-trap-card-container-element",{escapeDeactivates:!1,allowOutsideClick:!0})}}),p=(a(4976),a(47433));const u=(0,p.A)(d,[["render",i]]);var m=u}}]);
//# sourceMappingURL=gorizond-ui-0.1.26.umd.min.detail.js.map