(("undefined"!==typeof self?self:this)["webpackChunkgorizond_ui_0_1_11"]=("undefined"!==typeof self?self:this)["webpackChunkgorizond_ui_0_1_11"]||[]).push([[332],{4976:function(e,t,a){var r=a(49360);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=a(74825).A;n("86893f82",r,!0,{sourceMap:!1,shadowMode:!1})},49360:function(e,t,a){"use strict";a.r(t);var r=a(36758),n=a.n(r),o=a(40935),i=a.n(o),s=i()(n());s.push([e.id,".card-container{border-radius:var(--border-radius);display:flex;flex-basis:40%;margin:10px;min-height:100px;padding:10px;box-shadow:0 0 20px var(--shadow)}.card-container.highlight-border{border-left:5px solid var(--primary)}.card-container:not(.top){align-items:top;flex-direction:row;justify-content:start}.card-container .card-wrap{width:100%}.card-container .card-body{color:var(--input-label);display:flex;flex-direction:column;justify-content:center}.card-container .card-actions{align-self:end;display:flex;padding-top:20px}.card-container .card-title{align-items:center;display:flex;width:100%}.card-container .card-title h5{margin:0}.card-container .card-title .flex-right{margin-left:auto}.card-container.card-sticky{overflow:hidden}.card-container.card-sticky .card-wrap{display:flex;flex-direction:column}.card-container.card-sticky .card-wrap .card-body{justify-content:flex-start;overflow:auto}.card-container.card-sticky .card-wrap>*{flex:0}.card-container.card-sticky .card-wrap .card-body{flex:1}",""]),t["default"]=s},61819:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var r=a(9274);const n={class:"p-6 space-y-6"},o={class:"text-xl font-semibold"},i={key:0,class:"space-y-2"},s={class:"text-lg font-semibold"};function l(e,t,a,l,c,d){const u=(0,r.resolveComponent)("LabeledInput"),p=(0,r.resolveComponent)("PercentageBar"),g=(0,r.resolveComponent)("Card");return(0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createVNode)(g,{showActions:d.installUrl,buttonAction:d.copyInstall,buttonText:e.t("gorizond.cluster.installLink"),showHighlightBorder:!1},{title:(0,r.withCtx)((()=>[(0,r.createElementVNode)("h2",o,"Cluster: "+(0,r.toDisplayString)(d.cluster.metadata.name),1)])),body:(0,r.withCtx)((()=>[(0,r.createVNode)(u,{label:"Namespace",value:d.cluster.metadata.namespace,disabled:""},null,8,["value"]),(0,r.createVNode)(u,{label:"Kubernetes Version",value:d.cluster.spec.kubernetesVersion,disabled:""},null,8,["value"]),(0,r.createVNode)(u,{label:"Billing (Status)",value:d.billingStatus,disabled:""},null,8,["value"]),(0,r.createVNode)(u,{label:"Billing (Desired)",value:d.billingDesired,disabled:""},null,8,["value"]),"Done"!==d.cluster.status.provisioning?((0,r.openBlock)(),(0,r.createElementBlock)("div",i,[(0,r.createElementVNode)("h3",s,(0,r.toDisplayString)(e.t("gorizond.cluster.provisioning"))+": "+(0,r.toDisplayString)(d.cluster.status.provisioning),1),(0,r.createVNode)(p,{modelValue:d.currentStepPercentage,showPercentage:!1,preferredDirection:"MORE"},null,8,["modelValue"])])):(0,r.createCommentVNode)("",!0)])),_:1},8,["showActions","buttonAction","buttonText"])])}var c=a(84937),d=a(64415),u=a(12243),p={components:{Card:c.Z,LabeledInput:d.o,PercentageBar:u.A},props:{value:{type:Object,required:!0}},data(){return{setting:""}},computed:{cluster(){return this.value},steps(){return["WaitAddAdminMember","WaitHeadScaleDatabase","WaitHeadScaleMigrations","WaitHeadScaleConfig","WaitHeadScaleCreate","WaitHeadScaleCreateUser","WaitHeadScaleToken","WaitKubernetesStorage","WaitKubernetesDeploy","WaitKubernetesToken","Done"]},currentStepIndex(){const e=this.cluster?.status?.provisioning,t=this.steps.indexOf(e);return t>=0?t:0},currentStepPercentage(){const e=this.steps.length,t=this.currentStepIndex;return t/(e-1)*100},billingStatus(){return this.cluster?.status?.billing||"free (free tier use)"},billingDesired(){return this.cluster?.spec?.billing||"free (free tier use)"},installUrl(){const e=this.cluster.status||{},t=this.cluster.metadata?.name,a=this.cluster.spec?.kubernetesVersion;if(e.cluster&&e.namespace&&t&&e.k3sToken&&e.headscaleToken&&a){const r=e.k3sToken.replace(/\n/g,""),n=e.headscaleToken.replace(/\n/g,""),o=a.replace("-","+");return`curl -fsSL ${this.setting}/${e.cluster}/${e.namespace}/${t}/${r}/${n}/${o} | sh`}return null}},async created(){const e=await this.$store.dispatch("management/find",{type:"management.cattle.io.setting",id:"gorizond-install-server-url"});this.setting=e.value;const t=this.$store.getters["auth/v3User"]?.labels;if(t&&"admin-user"===t["authz.management.cattle.io/bootstrapping"]){const e=document.getElementById("gorizond-hide-cluster-link-style");e&&e.remove()}},methods:{async copyInstall(){try{await navigator.clipboard.writeText(this.installUrl),this.$store.dispatch("growl/success",{title:"Copied",message:"Install link copied to clipboard"},{root:!0})}catch(e){this.$store.dispatch("growl/fromError",{title:"Copy failed",err:e},{root:!0})}}}},g=a(47433);const h=(0,g.A)(p,[["render",l]]);var f=h},84937:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var r=a(9274);const n={class:"card-wrap"},o={class:"card-title","data-testid":"card-title-slot"},i={class:"card-body","data-testid":"card-body-slot"},s={key:0,class:"card-actions","data-testid":"card-actions-slot"};function l(e,t,a,l,c,d){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{id:"focus-trap-card-container-element",class:(0,r.normalizeClass)(["card-container",{"highlight-border":e.showHighlightBorder,"card-sticky":e.sticky}]),"data-testid":"card"},[(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",o,[(0,r.renderSlot)(e.$slots,"title",{},(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e.title),1)]))]),t[1]||(t[1]=(0,r.createElementVNode)("hr",null,null,-1)),(0,r.createElementVNode)("div",i,[(0,r.renderSlot)(e.$slots,"body",{},(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e.content),1)]))]),e.showActions?((0,r.openBlock)(),(0,r.createElementBlock)("div",s,[(0,r.renderSlot)(e.$slots,"actions",{},(()=>[(0,r.createElementVNode)("button",{class:"btn role-primary",onClick:t[0]||(t[0]=(...t)=>e.buttonAction&&e.buttonAction(...t))},(0,r.toDisplayString)(e.buttonText),1)]))])):(0,r.createCommentVNode)("",!0)])],2)}var c=a(82149),d=(0,r.defineComponent)({name:"Card",props:{title:{type:String,default:""},content:{type:String,default:""},buttonAction:{type:Function,default:()=>{}},buttonText:{type:String,default:"go"},showHighlightBorder:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},sticky:{type:Boolean,default:!1},triggerFocusTrap:{type:Boolean,default:!1}},setup(e){e.triggerFocusTrap&&(0,c.kS)("#focus-trap-card-container-element",{escapeDeactivates:!1,allowOutsideClick:!0})}}),u=(a(4976),a(47433));const p=(0,u.A)(d,[["render",l]]);var g=p}}]);
//# sourceMappingURL=gorizond-ui-0.1.11.umd.min.detail.js.map