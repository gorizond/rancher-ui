(("undefined"!==typeof self?self:this)["webpackChunkgorizond_ui_0_1_9"]=("undefined"!==typeof self?self:this)["webpackChunkgorizond_ui_0_1_9"]||[]).push([[332],{22880:function(e,t,r){"use strict";r.r(t);var a=r(36758),l=r.n(a),o=r(40935),s=r.n(o),n=s()(l());n.push([e.id,".bar[data-v-b4f4e2ae]{width:100%;height:15px;border-radius:7.5px;overflow:hidden;position:relative}.bar .indicator[data-v-b4f4e2ae]{height:100%}.bar .slice[data-v-b4f4e2ae]{position:absolute;top:0;bottom:0;width:1px;background-color:var(--body-bg)}",""]),t["default"]=n},37659:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var a=r(9274);const l={class:"p-6 space-y-6"},o={class:"text-xl font-semibold"},s={key:0,class:"space-y-2"},n={class:"text-lg font-semibold"};function i(e,t,r,i,c,d){const u=(0,a.resolveComponent)("LabeledInput"),p=(0,a.resolveComponent)("PercentageBar"),g=(0,a.resolveComponent)("Card");return(0,a.openBlock)(),(0,a.createElementBlock)("div",l,[(0,a.createVNode)(g,{showActions:d.installUrl,buttonAction:d.copyInstall,buttonText:e.t("gorizond.cluster.installLink"),showHighlightBorder:!1},{title:(0,a.withCtx)((()=>[(0,a.createElementVNode)("h2",o,"Cluster: "+(0,a.toDisplayString)(d.cluster.metadata.name),1)])),body:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{label:"Namespace",value:d.cluster.metadata.namespace,disabled:""},null,8,["value"]),(0,a.createVNode)(u,{label:"Kubernetes Version",value:d.cluster.spec.kubernetesVersion,disabled:""},null,8,["value"]),(0,a.createVNode)(u,{label:"Billing (Status)",value:d.billingStatus,disabled:""},null,8,["value"]),(0,a.createVNode)(u,{label:"Billing (Desired)",value:d.billingDesired,disabled:""},null,8,["value"]),"Done"!==d.cluster.status.provisioning?((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createElementVNode)("h3",n,(0,a.toDisplayString)(e.t("gorizond.cluster.provisioning"))+": "+(0,a.toDisplayString)(d.cluster.status.provisioning),1),(0,a.createVNode)(p,{modelValue:d.currentStepPercentage,showPercentage:!1,preferredDirection:"MORE"},null,8,["modelValue"])])):(0,a.createCommentVNode)("",!0)])),_:1},8,["showActions","buttonAction","buttonText"])])}var c=r(179),d=r(64415);const u={class:"percentage-bar"},p={key:0,class:"ml-5 percentage-value"};function g(e,t,r,l,o,s){const n=(0,a.resolveComponent)("Bar");return(0,a.openBlock)(),(0,a.createElementBlock)("span",u,[(0,a.createVNode)(n,{percentage:r.modelValue,"primary-color":s.primaryColor,slices:r.slices},null,8,["percentage","primary-color","slices"]),r.showPercentage?((0,a.openBlock)(),(0,a.createElementBlock)("span",p,(0,a.toDisplayString)(s.formattedPercentage),1)):(0,a.createCommentVNode)("",!0)])}function h(e,t,r,l,o,s){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"bar",style:(0,a.normalizeStyle)(s.barStyle)},[(0,a.createElementVNode)("div",{class:"indicator",style:(0,a.normalizeStyle)(s.indicatorStyle)},null,4),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(s.sliceStyles,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t,class:"slice",style:(0,a.normalizeStyle)(e)},null,4)))),128))],4)}var m={props:{percentage:{type:Number,required:!0},primaryColor:{type:String,default:"--primary"},secondaryColor:{type:String,default:"--border"},slices:{type:Array,default:()=>[]}},computed:{indicatorStyle(){return{width:`${this.percentage}%`,backgroundColor:`var(${this.primaryColor})`}},barStyle(){return{backgroundColor:`var(${this.secondaryColor})`}},sliceStyles(){return this.slices.map((e=>({left:`${e}%`,visibility:e<this.percentage?"visible":"hidden"})))}}},b=(r(54752),r(47433));const y=(0,b.A)(m,[["render",h],["__scopeId","data-v-b4f4e2ae"]]);var f=y,v=r(92043);const S={LESS:"LESS",MORE:"MORE"};var k={components:{Bar:f},props:{modelValue:{type:Number,required:!0,validator(e){return e>=0}},preferredDirection:{type:String,default:S.LESS},showPercentage:{type:Boolean,default:!1},colorStops:{type:Object,default:null},slices:{type:Array,default:()=>[]}},computed:{primaryColor(){const e=this.preferredDirection===S.LESS;if(this.colorStops){const t=Object.keys(this.colorStops).sort();if(e){let e=t.length-1;while(this.modelValue<t[e])e--;return this.colorStops[t[e]]}{let e=0;while(this.modelValue>t[e])e++;return this.colorStops[t[e]]}}const t=e?80:20,r=e?this.modelValue:t,a=e?t:this.modelValue;return r<=a?"--primary":"--error"},formattedPercentage(){return(0,v.l9)(this.modelValue)}}};r(70738);const C=(0,b.A)(k,[["render",g],["__scopeId","data-v-4ade54a6"]]);var w=C,V={components:{Card:c.Z,LabeledInput:d.o,PercentageBar:w},props:{value:{type:Object,required:!0}},data(){return{setting:""}},computed:{cluster(){return this.value},steps(){return["WaitAddAdminMember","WaitHeadScaleDatabase","WaitHeadScaleMigrations","WaitHeadScaleConfig","WaitHeadScaleCreate","WaitHeadScaleCreateUser","WaitHeadScaleToken","WaitKubernetesStorage","WaitKubernetesDeploy","WaitKubernetesToken","Done"]},currentStepIndex(){const e=this.cluster?.status?.provisioning,t=this.steps.indexOf(e);return t>=0?t:0},currentStepPercentage(){const e=this.steps.length,t=this.currentStepIndex;return t/(e-1)*100},billingStatus(){return this.cluster?.status?.billing||"free (free tier use)"},billingDesired(){return this.cluster?.spec?.billing||"free (free tier use)"},installUrl(){const e=this.cluster.status||{},t=this.cluster.metadata?.name,r=this.cluster.spec?.kubernetesVersion;if(e.cluster&&e.namespace&&t&&e.k3sToken&&e.headscaleToken&&r){const a=e.k3sToken.replace(/\n/g,""),l=e.headscaleToken.replace(/\n/g,""),o=r.replace("-","+");return`curl -fsSL ${this.setting}/${e.cluster}/${e.namespace}/${t}/${a}/${l}/${o} | sh`}return null}},async created(){const e=await this.$store.dispatch("management/find",{type:"management.cattle.io.setting",id:"gorizond-install-server-url"});this.setting=e.value;const t=this.$store.getters["auth/v3User"]?.labels;if(t&&"admin-user"===t["authz.management.cattle.io/bootstrapping"]){const e=document.getElementById("gorizond-hide-cluster-link-style");e&&e.remove()}},methods:{async copyInstall(){try{await navigator.clipboard.writeText(this.installUrl),this.$store.dispatch("growl/success",{title:"Copied",message:"Install link copied to clipboard"},{root:!0})}catch(e){this.$store.dispatch("growl/fromError",{title:"Copy failed",err:e},{root:!0})}}}};const B=(0,b.A)(V,[["render",i]]);var E=B},54752:function(e,t,r){var a=r(22880);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var l=r(74825).A;l("bcd5ae90",a,!0,{sourceMap:!1,shadowMode:!1})},56530:function(e,t,r){"use strict";r.r(t);var a=r(36758),l=r.n(a),o=r(40935),s=r.n(o),n=s()(l());n.push([e.id,".percentage-bar[data-v-4ade54a6]{display:flex;flex-direction:row}.percentage-bar .percentage-value[data-v-4ade54a6]{word-break:keep-all}",""]),t["default"]=n},70738:function(e,t,r){var a=r(56530);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var l=r(74825).A;l("b37b1fae",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=gorizond-ui-0.1.9.umd.min.detail.js.map